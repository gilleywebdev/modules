/*
 * jQuery.fn.autoResize 1.1
 * --
 * https://github.com/jamespadolsey/jQuery.fn.autoResize
 * --
 * This program is free software. It comes without any warranty, to
 * the extent permitted by applicable law. You can redistribute it
 * and/or modify it under the terms of the Do What The Fuck You Want
 * To Public License, Version 2, as published by Sam Hocevar. See
 * http://sam.zoy.org/wtfpl/COPYING for more details. */(function(e){function t(r){this.filter(t.resizableFilterSelector).each(function(){new n(e(this),r)});return this}function n(n,r){if(this.clones)return;this.config=e.extend({},t.defaults,r);this.el=n;this.nodeName=n[0].nodeName.toLowerCase();this.previousScrollTop=null;r.maxWidth==="original"&&(r.maxWidth=n.width());r.minWidth==="original"&&(r.minWidth=n.width());r.maxHeight==="original"&&(r.maxHeight=n.height());r.minHeight==="original"&&(r.minHeight=n.height());this.nodeName==="textarea"&&n.css({resize:"none",overflowY:"hidden"});n.data("AutoResizer",this);this.createClone();this.injectClone();this.bind()}t.defaults={onResize:function(){},animate:{duration:200,complete:function(){}},extraSpace:50,minHeight:"original",maxHeight:500,minWidth:"original",maxWidth:500};t.cloneCSSProperties=["lineHeight","textDecoration","letterSpacing","fontSize","fontFamily","fontStyle","fontWeight","textTransform","textAlign","direction","wordSpacing","fontSizeAdjust","padding"];t.cloneCSSValues={position:"absolute",top:-9999,left:-9999,opacity:0,overflow:"hidden",border:"1px solid black",padding:"0.49em"};t.resizableFilterSelector="textarea,input:not(input[type]),input[type=text],input[type=password]";t.AutoResizer=n;e.fn.autoResize=t;n.prototype={bind:function(){var t=e.proxy(function(){this.check();return!0},this);this.unbind();this.el.bind("keyup.autoResize",t).bind("change.autoResize",t);this.check(null,!0)},unbind:function(){this.el.unbind(".autoResize")},createClone:function(){var n=this.el,r=this,i=this.config;this.clones=e();if(i.minHeight!=="original"||i.maxHeight!=="original"){this.hClone=n.clone().height("auto");this.clones=this.clones.add(this.hClone)}if(i.minWidth!=="original"||i.maxWidth!=="original"){this.wClone=e("<div/>").width("auto").css({whiteSpace:"nowrap","float":"left"});this.clones=this.clones.add(this.wClone)}e.each(t.cloneCSSProperties,function(e,t){r.clones.css(t,n.css(t))});this.clones.removeAttr("name").removeAttr("id").attr("tabIndex",-1).css(t.cloneCSSValues)},check:function(e,t){var n=this.config,r=this.wClone,i=this.hClone,s=this.el,o=s.val();if(r){r.text(o);var u=r.outerWidth(),a=u+n.extraSpace>=n.minWidth?u+n.extraSpace:n.minWidth,f=s.width();a=Math.min(a,n.maxWidth);if(a<f&&a>=n.minWidth||a>=n.minWidth&&a<=n.maxWidth){n.onResize.call(s);s.scrollLeft(0);n.animate&&!t?s.stop(1,1).animate({width:a},n.animate):s.width(a)}}if(i){a&&i.width(a);i.height(0).val(o).scrollTop(1e4);var l=i[0].scrollTop+n.extraSpace;if(this.previousScrollTop===l)return;this.previousScrollTop=l;if(l>=n.maxHeight){s.css("overflowY","");return}s.css("overflowY","hidden");l<n.minHeight&&(l=n.minHeight);n.onResize.call(s);n.animate&&!t?s.stop(1,1).animate({height:l},n.animate):s.height(l)}},destroy:function(){this.unbind();this.el.removeData("AutoResizer");this.clones.remove();delete this.el;delete this.hClone;delete this.wClone;delete this.clones},injectClone:function(){(t.cloneContainer||(t.cloneContainer=e("<arclones/>").appendTo("body"))).append(this.clones)}}})(jQuery);